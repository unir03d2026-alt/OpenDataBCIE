<!--
  NAVIGATOR COMPONENT
  ==================
  Estilos y estructura del header/navegaci√≥n del template HDBSCAN.
  Para reutilizar en otros dashboards.
-->

<!-- CSS STYLES -->
<style>
    :root { 
        --font-main: 'Inter', sans-serif;
        --primary: #105682; --text-dark: #1e293b; --text-light: #64748b; --bg-body: #f8fafc; --bg-card: #ffffff; --border: #e2e8f0; --hover: #f1f5f9; --success: #10b981; --danger: #ef4444; --tooltip-bg: #1e293b; --tooltip-text: #ffffff;
    }
    [data-theme="dark"] { 
        --primary: #38bdf8; --text-dark: #f1f5f9; --text-light: #94a3b8; --bg-body: #0f172a; --bg-card: #1e293b; --border: #334155; --hover: #334155; --tooltip-bg: #ffffff; --tooltip-text: #0f172a; 
    }
    
    /* NAV (HDBSCAN Template) */
    .top-nav { position: fixed; top: 0; left: 0; right: 0; height: 80px; background: var(--bg-card); border-bottom: 5px solid var(--primary); display: flex; align-items: center; justify-content: space-between; padding: 0 30px; z-index: 50; box-shadow: 0 2px 10px rgba(0,0,0,0.05); }
    .header-title h1 { margin: 0; font-size: 24px; font-weight: 800; color: var(--primary); }
    .header-title .subtitle { font-size: 14px; color: var(--text-light); margin-top: 4px; }
    
    .nav-controls { display: flex; align-items: center; gap: 15px; }
    .update-badge { font-size: 11px; background: var(--hover); color: var(--text-light); padding: 5px 10px; border-radius: 4px; }

    /* TOGGLES */
    .toggle-wrapper { display: flex; flex-direction: column; align-items: center; gap: 4px; }
    .toggle-switch { position: relative; width: 80px; height: 30px; background: var(--bg-body); border: 1px solid var(--border); border-radius: 15px; cursor: pointer; display: flex; align-items: center; justify-content: space-between; padding: 2px; transition: background 0.3s; }
    .toggle-switch.active { background: #94a3b8; border-color: #94a3b8; }
    .toggle-knob { width: 24px; height: 24px; background: white; border-radius: 50%; box-shadow: 0 2px 4px rgba(0,0,0,0.2); transition: transform 0.3s; position: absolute; left: 3px; z-index: 2; }
    .toggle-switch.active .toggle-knob { transform: translateX(50px); }
    .toggle-icon { font-size: 14px; z-index: 1; margin: 0 8px; user-select: none; }
    .toggle-labels { display: flex; justify-content: space-between; width: 100%; font-size: 9px; font-weight: 700; color: var(--text-light); padding: 0 6px; }
    .toggle-labels span { flex: 1; text-align: center; }

    /* BUTTONS */
    .btn-action { font-family: var(--font-main); padding: 6px 16px; border-radius: 6px; font-size: 13px; font-weight: 700; cursor: pointer; border: 1px solid transparent; transition: 0.2s; min-width: 100px; text-align: center; }
    .btn-ghost-primary { background: transparent; border: 1px solid var(--primary); color: var(--primary); }
    .btn-ghost-primary:hover { background: var(--hover); }
    .btn-solid-primary { background: var(--primary); border: 1px solid var(--primary); color: white; }
    .btn-solid-primary:hover { opacity: 0.9; }
    
    [data-theme="dark"] .btn-ghost-primary { border-color: var(--primary); color: var(--primary); }
    [data-theme="dark"] .btn-solid-primary { color: #0f172a; }

    /* NAVIGATOR (Vertical Sidebar Style) */
    .dashboard-wrapper { display: flex; height: calc(100vh - 80px); flex-direction: row; margin-top: 80px; overflow: hidden; }
    .sidebar { width: 240px; background: var(--bg-card); border-right: 1px solid var(--border); padding: 20px; flex-shrink: 0; display: flex; flex-direction: column; height: 100%; overflow-y: auto; z-index: 10; transition: background 0.3s; }
    
    .sidebar-title { font-size: 13px; font-weight: 800; color: var(--primary); margin-bottom: 20px; padding-bottom: 10px; border-bottom: 2px solid var(--primary); }
    
    .btn-vertical { font-family: var(--font-main); display: flex; align-items: center; gap: 10px; width: 100%; text-align: left; padding: 12px 12px; margin-bottom: 8px; border: 1px solid transparent; background: transparent; border-radius: 8px; cursor: pointer; font-size: 13px; color: var(--text-light); font-weight: 500; transition: all 0.2s; }
    .btn-vertical svg { width: 18px; height: 18px; stroke: currentColor; stroke-width: 2; fill: none; flex-shrink: 0; }
    .btn-vertical:hover { background: var(--hover); color: var(--text-dark); }
    .btn-vertical.active { background: var(--primary); color: white; font-weight: 600; box-shadow: 0 4px 6px -1px rgba(16, 86, 130, 0.2); }
    .btn-vertical.active svg { stroke: white; }
</style>

<!-- NAV HTML TEMPLATE -->
<nav class="top-nav">
    <div class="header-title">
        <h1 data-key="title" id="lbl-main">{{TITLE}}</h1>
        <div class="subtitle">
            <span data-key="subtitle" id="lbl-sub">{{SUBTITLE}}</span>
            <span style="margin: 0 10px; opacity: 0.3;">|</span>
            <span data-key="purpose_text" style="font-weight: 400; font-size: 13px; opacity: 0.8;">{{PURPOSE}}</span>
        </div>
    </div>

    <!-- NAVIGATOR TABS -->
    <!-- NAVIGATOR TABS MOVED TO SIDEBAR -->
    <div class="nav-placeholder" style="flex:1;"></div>

    <div class="nav-controls">
        <div style="display:flex; gap:10px; align-items: center; margin-right:15px">
            <!-- BOTONES DE NAVEGACI√ìN REEMPLAZADOS POR NAVIGATOR -->
            <button class="btn-action btn-ghost-primary" onclick="takeScreenshot()">
                <span id="btn-snap-txt">Captura</span>
            </button>
            <button class="btn-action btn-solid-primary" onclick="generatePDF()">
                <span id="btn-pdf-txt">PDF</span>
            </button>
        </div>
        
        <div class="update-badge" id="lbl-update">{{UPDATE_DATE}}</div>
        
        <!-- THEME TOGGLE -->
        <div class="toggle-wrapper">
            <div class="toggle-switch" id="btn-theme" onclick="toggleTheme()" title="Tema">
                <div class="toggle-knob"></div>
                <span class="toggle-icon">‚òÄÔ∏è</span>
                <span class="toggle-icon">üåô</span>
            </div>
            <div class="toggle-labels">
                <span id="lbl-theme-light">Claro</span>
                <span id="lbl-theme-dark">Oscuro</span>
            </div>
        </div>

        <!-- LANG TOGGLE -->
        <div class="toggle-wrapper">
            <div class="toggle-switch" id="btn-lang" onclick="toggleLang()" title="Idioma">
                <div class="toggle-knob"></div>
            </div>
            <div class="toggle-labels">
                <span id="lbl-lang-es">Esp</span>
                <span id="lbl-lang-en">Ing</span>
            </div>
        </div>
    </div>
</nav>

<!-- SIDEBAR COMPONENT -->
<aside class="sidebar">
    <div class="sidebar-title">Panel de Control</div>
    
    <button class="btn-vertical active" onclick="switchTab('overview')">
        <svg viewBox="0 0 24 24"><rect x="3" y="3" width="7" height="7"></rect><rect x="14" y="3" width="7" height="7"></rect><rect x="14" y="14" width="7" height="7"></rect><rect x="3" y="14" width="7" height="7"></rect></svg>
        <span>Overview</span>
    </button>
    
    <button class="btn-vertical" onclick="switchTab('temporal')">
        <svg viewBox="0 0 24 24"><polyline points="23 6 13.5 15.5 8.5 10.5 1 18"></polyline><polyline points="17 6 23 6 23 12"></polyline></svg>
        <span>Evoluci√≥n Temporal</span>
    </button>
    
    <button class="btn-vertical" onclick="switchTab('sector')">
        <svg viewBox="0 0 24 24"><path d="M3 21h18"/><path d="M5 21V7l8-4 8 4v14"/><path d="M17 21v-8.5a1.5 1.5 0 0 0-1.5-1.5h-5a1.5 1.5 0 0 0-1.5 1.5V21"/><path d="M9 10a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v2.5a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1V10z"/></svg>
        <span>An√°lisis Sectorial</span>
    </button>
    
    <button class="btn-vertical" onclick="switchTab('risk')">
        <svg viewBox="0 0 24 24"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line></svg>
        <span>Factores de Riesgo</span>
    </button>
    
    <button class="btn-vertical" onclick="switchTab('quality')">
       <svg viewBox="0 0 24 24"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
       <span>Calidad de Datos</span>
    </button>
    
    <div style="margin-top: auto; padding-top: 20px; border-top: 1px solid var(--border); font-size: 11px; color: var(--text-light); text-align: center;">
        v2.0.1 - Beta
    </div>
</aside>

<!-- JAVASCRIPT FUNCIONES TOGGLE -->
<script>
    // THEME TOGGLE
    window.toggleTheme = function() {
        const btn = document.getElementById('btn-theme');
        btn.classList.toggle('active');
        const isDark = btn.classList.contains('active');
        document.documentElement.setAttribute('data-theme', isDark ? 'dark' : 'light');
        localStorage.setItem('theme', isDark ? 'dark' : 'light');
        // Trigger chart relayout if needed
        if(typeof relayoutCharts === 'function') relayoutCharts();
    };

    // LANG TOGGLE
    window.toggleLang = function() {
        const btn = document.getElementById('btn-lang');
        btn.classList.toggle('active');
        const isEng = btn.classList.contains('active');
        // Trigger translation if needed
        if(typeof applyLang === 'function') applyLang(isEng ? 'en' : 'es');
    };
</script>
